(()=>{var e={942:(e,t)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)s.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.domReady;var s=n.n(t);const a=window.wp.element,i=window.wp.i18n,o=({isStepActive:t,isStepComplete:n,goToNext:s,goToPrevious:a,stepIndex:o})=>{const l=1===o;let r=(0,i.__)("Migrating from Atomic Blocks to Genesis Blocks is a one-way action. It canâ€™t be undone. Please back up your site before you begin.","genesis-blocks");return genesisBlocksMigration.isPro&&(r=(0,i.__)("Migrating your Genesis Blocks content is a one-way action. It canâ€™t be undone. Please back up your site before you begin.","genesis-blocks")),(0,e.createElement)(h,{isActive:t,isComplete:n},(0,e.createElement)(y,{index:o,isComplete:n}),(0,e.createElement)(E,{heading:(0,i.__)("Back Up Your Site","genesis-blocks"),isStepActive:t},(0,e.createElement)("p",null,r),(0,e.createElement)(v,null,!l&&(0,e.createElement)(b,{onClick:a}),(0,e.createElement)(u,{checkboxLabel:(0,i.__)("I have backed up my site.","genesis-blocks"),onClick:s,stepIndex:o}))))},l=window.wp.a11y,r=window.wp.apiFetch;var c=n.n(r);const m=({isStepActive:t,isStepComplete:n,stepIndex:s,goToNext:o})=>{const[r,m]=(0,a.useState)(0),[g,p]=(0,a.useState)(!1),[u,b]=(0,a.useState)(!1),[d,k]=(0,a.useState)(""),[_,w]=(0,a.useState)(!1),[S,P]=(0,a.useState)(0),C=[(0,i.__)("Migrate block settings.","genesis-blocks"),(0,i.__)("Migrate block content. Migrated: ","genesis-blocks")+` ${S}.`,(0,i.__)("Migrate favorite blocks.","genesis-blocks"),genesisBlocksMigration.isPro?(0,i.__)("Clean up.","genesis-blocks"):(0,i.__)("Deactivate Atomic Blocks.","genesis-blocks")],N=async()=>{await c()({path:"/genesis-blocks/migrate-content",method:"POST"}).then((async e=>{if(e.results&&e.results.postsFound>0)return P((t=>t+e.results.postsFound)),void await N();m(2),await x()})).catch((async e=>{e.hasOwnProperty("code")&&"invalid_json"===e.code?await N():(e.hasOwnProperty("message")&&k(e.message),(0,l.speak)((0,i.__)("The migration failed during post content migration","genesis-blocks")),b(!0))}))},x=async()=>{await c()({path:"/genesis-blocks/migrate-user-meta",method:"POST"}).then((async()=>{m(3),await T()})).catch((async e=>{e.hasOwnProperty("code")&&"invalid_json"===e.code?await x():(e.hasOwnProperty("message")&&k(e.message),(0,l.speak)((0,i.__)("The migration failed while migrating favorite blocks.","genesis-blocks")),b(!0))}))},T=async()=>{await c()({path:"/genesis-blocks/migrate-cleanup",method:"POST"}).then((()=>{(0,l.speak)((0,i.__)("The migration was successful!","genesis-blocks")),w(!0),o()}))};return(0,e.createElement)(h,{isActive:t,isComplete:n},(0,e.createElement)(y,{index:s,isComplete:n}),(0,e.createElement)(E,{heading:(0,i.__)("Migrate Your Content","genesis-blocks"),isStepActive:t,isLastStep:!0},!_&&(0,e.createElement)("p",null,(0,i.__)("Okay! Everything is ready. Letâ€™s do this. While the migration is underway, donâ€™t leave this page.","genesis-blocks")),!!d&&(0,e.createElement)("div",{className:"gb-migration__error inline-notice gb-error"},(0,e.createElement)("p",null,(0,e.createElement)("span",null,(0,i.__)("The following error occurred:","genesis-blocks")),d)),(g||_)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(f,{steps:C,currentStep:r,complete:!g})),!g&&!_&&(0,e.createElement)("button",{className:"gb-admin-button-primary",onClick:async()=>{(0,l.speak)((0,i.__)("The migration is now in progress","genesis-blocks")),k(""),p(!0),await(async()=>{await c()({path:"/genesis-blocks/migrate-settings",method:"POST"}).then((async()=>{m(1),await(async()=>{await c()({path:"/genesis-blocks/migrate-pro-settings",method:"POST"}).catch((e=>{e.hasOwnProperty("message")&&k(e.message),(0,l.speak)((0,i.__)("The pro settings migration failed.","genesis-blocks")),b(!0)}))})(),await N()})).catch((e=>{e.hasOwnProperty("message")&&k(e.message),(0,l.speak)((0,i.__)("The migration failed during settings migration.","genesis-blocks")),b(!0),p(!1)}))})(),p(!1)}},u?(0,i.__)("Try Again","genesis-blocks"):(0,i.__)("Migrate Now","genesis-blocks")),_&&(0,e.createElement)(e.Fragment,null,!genesisBlocksMigration.isPro&&(0,e.createElement)("p",null,(0,e.createElement)("span",{role:"img","aria-label":(0,i.__)("party emoji","genesis-blocks")},"ðŸŽ‰"),"Â ",(0,i.__)("The migration completed successfully! Time to say goodbye to Atomic Blocks (itâ€™s been fun!) and step into the FUTURE","genesis-blocks"),"Â ",(0,e.createElement)("span",{className:"message-future"},(0,i.__)("FUTURE","genesis-blocks")),"Â ",(0,e.createElement)("sub",null,(0,i.__)("FUTURE","genesis-blocks")),"."),genesisBlocksMigration.isPro&&(0,e.createElement)("p",null,(0,e.createElement)("span",{role:"img","aria-label":(0,i.__)("party emoji","genesis-blocks")},"ðŸŽ‰"),"Â ",(0,i.__)("The migration completed successfully!","genesis-blocks")),(0,e.createElement)(v,null,(0,e.createElement)("a",{href:genesisBlocksMigration.gbUrl,className:"btn"},(0,i.__)("Get started with Genesis Blocks","genesis-blocks"))))))},g=({isStepActive:t,isStepComplete:n,stepIndex:s,goToNext:a,goToPrevious:o})=>(0,e.createElement)(h,{isActive:t,isComplete:n},(0,e.createElement)(y,{index:s,isComplete:n}),(0,e.createElement)(E,{heading:(0,i.__)("Update CSS and PHP code","genesis-blocks"),isStepActive:t},(0,e.createElement)("p",null,(0,e.createElement)("b",null,(0,i.__)("You will need to make manual changes if your theme, plugins or customizations include Atomic Blocks CSS or PHP:","genesis-blocks"))),(0,e.createElement)("ul",{className:"list-disc list-inside mt-2"},(0,e.createElement)("li",null,(0,e.createElement)("b",null,(0,i.__)("CSS","genesis-blocks"))," -"," ",(0,i.__)("CSS classes and HTML markup have changed.","genesis-blocks"),"Â ",(0,e.createElement)("a",{href:"https://wpeng.in/ab-gb-css/",target:"_blank",rel:"noopener noreferrer"},(0,i.__)("Check if you need to make CSS changes.","genesis-blocks"))),(0,e.createElement)("li",null,(0,e.createElement)("b",null,(0,i.__)("PHP","genesis-blocks"))," -"," ",(0,i.__)("Filter, function and block names have changed.","genesis-blocks"),"Â ",(0,e.createElement)("a",{href:"https://wpeng.in/ab-gb-php/",target:"_blank",rel:"noopener noreferrer"},(0,i.__)("Check if you need to make PHP changes.","genesis-blocks")))),(0,e.createElement)(v,null,(0,e.createElement)(b,{onClick:o}),(0,e.createElement)(u,{checkboxLabel:(0,i.__)("I have made necessary changes to PHP and CSS.","genesis-blocks"),onClick:a,stepIndex:s})))),p=()=>{const[t,n]=(0,a.useState)(1),s=()=>{n(t-1)},i=()=>{n(t+1)},l=[o,g,m];return(0,e.createElement)("div",{className:"gb-migration__content-wrapper"},(0,e.createElement)("div",{className:"container gb-migration__content-container gb-admin-plugin-container"},(0,e.createElement)(d,null),l.map(((n,a)=>{const o=1+a,l=t===o,r=t>o;return(0,e.createElement)(n,{key:`gb-migration-step-${o}`,currentStepIndex:t,goToNext:i,goToPrevious:s,isStepActive:l,isStepComplete:r,stepIndex:o})}))))},u=({onClick:t,checkboxLabel:n,stepIndex:s})=>{const[o,l]=(0,a.useState)(!1);if(!n)return(0,e.createElement)("button",{className:"btn",onClick:t},(0,i.__)("Next Step","genesis-blocks"));const r=`gb-migration-check-${s}`;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("form",null,(0,e.createElement)("input",{id:r,type:"checkbox",onClick:()=>{l(!o)}}),(0,e.createElement)("label",{htmlFor:r,className:"gb-checkbox-label"},n)),(0,e.createElement)("button",{className:"gb-admin-button-primary",onClick:t,disabled:!o},(0,i.__)("Next Step","genesis-blocks")))},b=({onClick:t})=>(0,e.createElement)("button",{className:"gb-admin-button-secondary",onClick:t},(0,i.__)("Previous","genesis-blocks")),d=()=>{let t=(0,i.__)("Atomic Blocks has been renamed to Genesis Blocks","genesis-blocks");return genesisBlocksMigration.isPro&&(t=(0,i.__)("We need to update your blocks to give you the latest features!","genesis-blocks")),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"gb-migration-intro"},(0,e.createElement)("h2",null,t),(0,e.createElement)("p",null,(0,i.__)("Same powerful blocks, same beautiful designs, same innovative team.","genesis-blocks")),(0,e.createElement)("p",null,(0,i.__)("To continue receiving the best of what our team is building, we encourage you to migrate. Our migration tool makes this nice and easy, and for the majority of use cases, completely automated.","genesis-blocks")),(0,e.createElement)("div",{className:"inline-notice gb-info"},(0,e.createElement)("p",null,(0,i.__)("Need to let the developer for this site know about this? Send them this link.","genesis-blocks")),(0,e.createElement)("a",{href:"https://wpeng.in/ab-gb-dev/",target:"_blank",rel:"noopener noreferrer",className:"gb-admin-button-link aligned"},(0,e.createElement)("span",null,(0,i.__)("Developer Notice","genesis-blocks"))))),(0,e.createElement)("h2",null,(0,i.__)("Let's Migrate","genesis-blocks")))};var k=n(942),_=n.n(k);const h=({isActive:t,isComplete:n,children:s})=>(0,e.createElement)("div",{className:_()("step",{"step--active":t,"step--complete":n})},s),E=({children:t,heading:n,isStepActive:s,isLastStep:a})=>(0,e.createElement)("div",{className:"step-content"},(0,e.createElement)("h3",null,n),(s||a)&&t),v=({children:t})=>(0,e.createElement)("div",{className:"step-footer"},t),y=({index:t,isComplete:n})=>{const s=`gb-migration-icon-${t}`,a=(0,e.createElement)("svg",{fill:"currentColor",viewBox:"0 0 20 20","aria-labelledby":s},(0,e.createElement)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}),(0,e.createElement)("title",{id:s},(0,i.__)("Step completed","genesis-blocks")));return(0,e.createElement)("div",{className:"step-icon"},n?a:t)},f=({steps:t,currentStep:n,complete:s})=>{const a=t.map(((a,i)=>{let o="";return n===i&&(o="active"),(n>i||s&&n===t.length-1)&&(o="done"),(0,e.createElement)("li",{key:i,className:o},a,n===i&&!s&&(0,e.createElement)("div",{className:"gb-migration-progress",role:"progressbar"},(0,e.createElement)("div",{className:"gb-migration-progress-inside"}),(0,e.createElement)("div",{className:"gb-migration-progress-inside gb-migration-progress-animate2"})))}));return(0,e.createElement)("ul",{className:"substeps"},a)};s()((()=>{(0,a.render)((0,e.createElement)(p,null),document.querySelector(".gb-migration__content"))}))})()})();